{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/Frontend-ReactJS-QuickStart/src/routes/Login.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { push } from \"connected-react-router\";\nimport * as actions from \"../store/actions\";\nimport { KeyCodeUtils, LanguageUtils } from \"../utils\";\nimport userIcon from \"../../src/assets/images/user.svg\";\nimport passIcon from \"../../src/assets/images/pass.svg\";\nimport './Login.scss';\nimport { FormattedMessage } from 'react-intl';\nimport adminService from '../services/adminService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.initialState = {\n      username: '',\n      password: '',\n      loginError: ''\n    };\n    this.state = { ...this.initialState\n    };\n\n    this.refresh = () => {\n      this.setState({ ...this.initialState\n      });\n    };\n\n    this.onUsernameChange = e => {\n      this.setState({\n        username: e.target.value\n      });\n    };\n\n    this.onPasswordChange = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.redirectToSystemPage = () => {\n      const {\n        navigate\n      } = this.props;\n      const redirectPath = '/system/user-manage';\n      navigate(`${redirectPath}`);\n    };\n\n    this.processLogin = () => {\n      const {\n        username,\n        password\n      } = this.state;\n      const {\n        adminLoginSuccess,\n        adminLoginFail\n      } = this.props;\n      let loginBody = {\n        username: 'admin',\n        password: '123456'\n      }; //sucess\n\n      let adminInfo = {\n        \"tlid\": \"0\",\n        \"tlfullname\": \"Administrator\",\n        \"custype\": \"A\",\n        \"accessToken\": \"eyJhbGciOiJIU\"\n      };\n      adminLoginSuccess(adminInfo);\n      this.refresh();\n      this.redirectToSystemPage();\n\n      try {\n        adminService.login(loginBody);\n      } catch (e) {\n        console.log('error login : ', e);\n      }\n    };\n\n    this.handlerKeyDown = event => {\n      const keyCode = event.which || event.keyCode;\n\n      if (keyCode === KeyCodeUtils.ENTER) {\n        event.preventDefault();\n        if (!this.btnLogin.current || this.btnLogin.current.disabled) return;\n        this.btnLogin.current.click();\n      }\n    };\n\n    this.btnLogin = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handlerKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handlerKeyDown); // fix Warning: Can't perform a React state update on an unmounted component\n\n    this.setState = (state, callback) => {\n      return;\n    };\n  }\n\n  render() {\n    const {\n      username,\n      password,\n      loginError\n    } = this.state;\n    const {\n      lang\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_login\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"title\",\n            children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n              id: \"login.login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group icon-true\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"icon\",\n              src: userIcon,\n              alt: \"this\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: LanguageUtils.getMessageByKey(\"login.username\", lang),\n              id: \"username\",\n              name: \"username\",\n              type: \"text\",\n              className: \"form-control\",\n              value: username,\n              onChange: this.onUsernameChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"phone-input-container\",\n            className: \"form-group icon-true\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"icon\",\n              src: passIcon,\n              alt: \"this\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: LanguageUtils.getMessageByKey(\"login.password\", lang),\n              id: \"password\",\n              name: \"password\",\n              type: \"password\",\n              className: \"form-control\",\n              value: password,\n              onChange: this.onPasswordChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), loginError !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-error\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"login-error-message\",\n              children: loginError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group login\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: this.btnLogin,\n              id: \"btnLogin\",\n              type: \"submit\",\n              className: \"btn\",\n              value: LanguageUtils.getMessageByKey(\"login.login\", lang),\n              onClick: this.processLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    lang: state.app.language\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    navigate: path => dispatch(push(path)),\n    adminLoginSuccess: adminInfo => dispatch(actions.adminLoginSuccess(adminInfo)),\n    adminLoginFail: () => dispatch(actions.adminLoginFail())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/macbook/Desktop/Frontend-ReactJS-QuickStart/src/routes/Login.js"],"names":["React","Component","connect","push","actions","KeyCodeUtils","LanguageUtils","FormattedMessage","adminService","Login","constructor","props","initialState","username","password","loginError","state","refresh","setState","onUsernameChange","e","target","value","onPasswordChange","redirectToSystemPage","navigate","redirectPath","processLogin","adminLoginSuccess","adminLoginFail","loginBody","adminInfo","login","console","log","handlerKeyDown","event","keyCode","which","ENTER","preventDefault","btnLogin","current","disabled","click","createRef","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","callback","render","lang","userIcon","getMessageByKey","passIcon","mapStateToProps","app","language","mapDispatchToProps","dispatch","path"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { push } from \"connected-react-router\";\n\nimport * as actions from \"../store/actions\";\nimport { KeyCodeUtils, LanguageUtils } from \"../utils\";\n\nimport userIcon from '../../src/assets/images/user.svg';\nimport passIcon from '../../src/assets/images/pass.svg';\nimport './Login.scss';\nimport { FormattedMessage } from 'react-intl';\n\nimport adminService from '../services/adminService';\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.btnLogin = React.createRef();\n    }\n\n    initialState = {\n        username: '',\n        password: '',\n        loginError: ''\n    }\n\n    state = {\n        ...this.initialState\n    };\n\n    refresh = () => {\n        this.setState({\n            ...this.initialState\n        })\n    }\n\n    onUsernameChange = (e) => {\n        this.setState({ username: e.target.value })\n    }\n\n    onPasswordChange = (e) => {\n        this.setState({ password: e.target.value })\n    }\n\n    redirectToSystemPage = () => {\n        const { navigate } = this.props;\n        const redirectPath = '/system/user-manage';\n        navigate(`${redirectPath}`);\n    }\n\n    processLogin = () => {\n        const { username, password } = this.state;\n\n        const { adminLoginSuccess, adminLoginFail } = this.props;\n        let loginBody = {\n            username: 'admin',\n            password: '123456'\n        }\n        //sucess\n        let adminInfo = {\n            \"tlid\": \"0\",\n            \"tlfullname\": \"Administrator\",\n            \"custype\": \"A\",\n            \"accessToken\": \"eyJhbGciOiJIU\"\n        }\n\n        adminLoginSuccess(adminInfo);\n        this.refresh();\n        this.redirectToSystemPage();\n        try {\n            adminService.login(loginBody)\n        } catch (e) {\n            console.log('error login : ', e)\n        }\n\n    }\n\n    handlerKeyDown = (event) => {\n        const keyCode = event.which || event.keyCode;\n        if (keyCode === KeyCodeUtils.ENTER) {\n            event.preventDefault();\n            if (!this.btnLogin.current || this.btnLogin.current.disabled) return;\n            this.btnLogin.current.click();\n        }\n    };\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.handlerKeyDown);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.handlerKeyDown);\n        // fix Warning: Can't perform a React state update on an unmounted component\n        this.setState = (state, callback) => {\n            return;\n        };\n    }\n\n    render() {\n        const { username, password, loginError } = this.state;\n        const { lang } = this.props;\n\n        return (\n            <div className=\"login-wrapper\">\n                <div className=\"login-container\">\n                    <div className=\"form_login\">\n                        <h2 className=\"title\">\n                            <FormattedMessage id=\"login.login\" />\n                        </h2>\n                        <div className=\"form-group icon-true\">\n                            <img className=\"icon\" src={userIcon} alt=\"this\" />\n                            <input\n                                placeholder={LanguageUtils.getMessageByKey(\"login.username\", lang)}\n                                id=\"username\"\n                                name=\"username\"\n                                type=\"text\"\n                                className=\"form-control\"\n                                value={username}\n                                onChange={this.onUsernameChange}\n                            />\n                        </div>\n\n                        <div id=\"phone-input-container\" className=\"form-group icon-true\">\n                            <img className=\"icon\" src={passIcon} alt=\"this\" />\n                            <input\n                                placeholder={LanguageUtils.getMessageByKey(\"login.password\", lang)}\n                                id=\"password\"\n                                name=\"password\"\n                                type=\"password\"\n                                className=\"form-control\"\n                                value={password}\n                                onChange={this.onPasswordChange}\n                            />\n                        </div>\n\n                        {loginError !== '' && (\n                            <div className='login-error'>\n                                <span className='login-error-message'>{loginError}</span>\n                            </div>\n                        )}\n\n                        <div className=\"form-group login\">\n                            <input\n                                ref={this.btnLogin}\n                                id=\"btnLogin\"\n                                type=\"submit\"\n                                className=\"btn\"\n                                value={LanguageUtils.getMessageByKey(\"login.login\", lang)}\n                                onClick={this.processLogin}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        lang: state.app.language\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        navigate: (path) => dispatch(push(path)),\n        adminLoginSuccess: (adminInfo) => dispatch(actions.adminLoginSuccess(adminInfo)),\n        adminLoginFail: () => dispatch(actions.adminLoginFail()),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}